const CACHE_VERSION="v1.0.0",CACHE_NAME="bob-home-care-v1.0.0",STATIC_CACHE="static-v1.0.0",IMAGE_CACHE="images-v1.0.0",API_CACHE="api-v1.0.0",STATIC_ASSETS=["/","/index.html","/styles.css","/script.js","/lazy-load.js","/blog-kitchen-cleaning.html","/blog-bathroom-cleaning.html","/blog-bedroom-cleaning.html","/blog-airbnb-cleaning.html","/blog-eco-products.html","/blog-cleaning-schedule.html"],IMAGE_ASSETS=["/images/ChatGPTImageNov24,2025,05_56_54PM.webp","/images/bob-logo-new.webp","/images/Housekeeping-11.webp","/images/GreenBG.webp"];function cacheFirst(e){return caches.match(e).then(t=>t||fetch(e).then(t=>{if(!t||200!==t.status||"error"===t.type)return t;const c=t.clone();return caches.open(CACHE_NAME).then(t=>{t.put(e,c)}),t}).catch(()=>caches.match("/index.html")))}function cacheStatic(e){return caches.match(e).then(t=>{const c=fetch(e).then(t=>{if(!t||200!==t.status)return t;const c=t.clone();return caches.open(STATIC_CACHE).then(t=>{t.put(e,c)}),t});return t||c})}function cacheImage(e){return caches.match(e).then(t=>t||fetch(e).then(t=>{if(!t||200!==t.status)return t;const c=t.clone();return caches.open(IMAGE_CACHE).then(t=>{t.put(e,c)}),t}).catch(()=>caches.match("/images/GreenBG.webp")))}self.addEventListener("install",e=>{console.log("[Service Worker] Installing..."),e.waitUntil(Promise.all([caches.open(STATIC_CACHE).then(e=>(console.log("[Service Worker] Caching static assets"),e.addAll(STATIC_ASSETS).catch(e=>{console.warn("[Service Worker] Error caching static assets:",e)}))),caches.open(IMAGE_CACHE).then(e=>(console.log("[Service Worker] Caching critical images"),e.addAll(IMAGE_ASSETS).catch(e=>{console.warn("[Service Worker] Error caching images:",e)})))]).then(()=>{console.log("[Service Worker] Installation complete"),self.skipWaiting()}))}),self.addEventListener("activate",e=>{console.log("[Service Worker] Activating..."),e.waitUntil(caches.keys().then(e=>Promise.all(e.map(e=>{if(e!==STATIC_CACHE&&e!==IMAGE_CACHE&&e!==API_CACHE&&e.includes("bob-home-care"))return console.log("[Service Worker] Deleting old cache:",e),caches.delete(e)}))).then(()=>(console.log("[Service Worker] Activation complete"),self.clients.claim())))}),self.addEventListener("fetch",e=>{const{request:t}=e,c=new URL(t.url);"GET"===t.method&&c.origin===location.origin&&("image"===t.destination?e.respondWith(cacheImage(t)):"style"===t.destination||"script"===t.destination?e.respondWith(cacheStatic(t)):e.respondWith(cacheFirst(t)))}),self.addEventListener("message",e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting(),e.data&&"CLEAR_CACHE"===e.data.type&&caches.keys().then(e=>Promise.all(e.map(e=>{if(e.includes("bob-home-care"))return caches.delete(e)})))}),console.log("[Service Worker] Service Worker script loaded");